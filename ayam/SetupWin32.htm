<!DOCTYPE HTML SYSTEM "html.dtd">
<HTML>
<HEAD>
<TITLE>Ayam Win32 Setup</TITLE>
</HEAD>
<BODY>

<H1>Ayam Win32 Setup</H1>

This document describes how to set up Ayam on the Win32 platform.
<p>
The executable of Ayam is located in the directory named <code>"bin"</code>
.<br>
You do not need to install Ayam in the system, you can start it
directly with a double click from where you unpacked the archive.
<p>
To start Ayam easily, you can add an icon to your desktop by double
clicking on the <code>"make_shortcut.vbs"</code> script.<br>
Since Ayam1.8 there are also two more scripts named
<code>"make_ftassoc.vbs"</code> and <code>"remove_ftassoc.vbs"</code>
that add and remove a file type association with Ayam scene files
(extension .ay) to/from your desktop.
<p>
If you get error messages about input or output file handles
when trying to render directly from Ayam, please use the
accompanying batch file <code>"ayam.bat"</code> to start Ayam
instead of directly using <code>"ayam.exe"</code>.
<p>
Before you start modelling with Ayam, the following three things have
to be done:
<OL>
 <LI> Saving Preferences
 <LI> Setting up Shaders
 <LI> Creating and Saving a Working Environment (View Windows)
</OL>


<H2>1. Saving Preferences</H2>

All preference settings (Menu: <code>"Edit/Preferences"</code>) are
automatically saved when you leave Ayam.<br>

The preferences are saved to the file:<br>
<code>"$(HOME)/ayamrc"</code> if the environment variable
<code>"HOME"</code> exists<br>
<code>"$(TEMP)/ayamrc"</code> else.
<p>
The following steps need to be done if you (for some reason)
do not like it that way, or the preferences end up in silly<br>
places (e.g. Win95 is setting your $(HOME) to <code>"C:/"</code>, so that
the preferences end up in <code>"C:/ayamrc"</code>...).<br>
However, if anything is fine with you, just skip to Step 2 now.<p>

You can change the path and filename of the preference settings
using the environment variable <code>"AYAMRC"</code>.<br>
How do you set an environment variable?<p>

An easy way to do this is to edit the batch file <code>"ayam.bat"</code>,
and use it to start Ayam (this route does not work on Windows-NT4!):
<UL>
 <LI> quit Ayam
 <LI> edit the file <code>"ayam.bat"</code>
 <LI> remove the leading <code>"rem"</code> from the line
<code>"rem SET AYAMRC=D:/Ayam/ayamrc"</code>
 <LI> you should change the path <code>"D:/Ayam/ayamrc"</code> to a more
appropriate setting; notice that the drive and the path you use already
have to exist, and that you should have write permissions to the path
that you choose
 <LI> save the file <code>"ayam.bat"</code>
 <LI> use the batch file <code>"ayam.bat"</code> to start Ayam
 <LI> remember to always use the file <code>"ayam.bat"</code> to start
Ayam in the future
</UL>

Alternatively:
<UL>
 <LI> quit Ayam

 <LI> <b>WinXP</b>: open
<code>"Start/Control Panel/System/Advanced/Environment Variables"</code><br>
Add a new variable named <code>"AYAMRC"</code> and set it e.g. to
<code>"D:/ayam/ayamrc"</code>;
notice that the drive and the path you use already have to exist,
and that you should have write permissions to the path that you choose

 <LI> <b>WinNT/2000</b>: open
<code>"Start/Settings/Control Panel/System/Environment"</code><br>
Add a new variable named <code>"AYAMRC"</code>
(On Win2000 you need to be administrator to be able to do this.)
and set it e.g. to <code>"D:/ayam/ayamrc"</code>;
notice that the drive and the path you use already have to exist,
and that you should have write permissions to the path that you choose

 <LI> <b>Win95/98/98SE</b>: From the start menu, choose <code>"Run"</code>
and enter <code>"sysedit"</code>, then click <code>"Ok"</code>.
Select the window that is displaying <code>"AUTOEXEC.BAT"</code>.
Add the line<br>
SET AYAMRC=D:/ayam/ayamrc<br>
to it. Notice that the drive and the path you use already have to exist,
and that you should have write permissions to the path that you choose.

 <LI> <b>WinME</b>: Open
<code>"Start/Programs/Accessories/System Tools/System Information"</code>.
This brings up a window titled <code>"Microsoft Help and Support"</code>.
From here, choose the <code>"Tools"</code> menu, then select the
<code>"System-Configuration"</code> utility. Click the
<code>"Environment"</code> tab.
Add a new variable named <code>"AYAMRC"</code> and set it e.g. to
<code>"D:/ayam/ayamrc"</code>;
notice that the drive and the path you use already have to exist,
and that you should have write permissions to the path that you choose.
 <LI> restart Windows
 <LI> start Ayam again
</UL>

You can switch off automatic saving of the preferences on exit using the
preference setting <code>"Main/AutoSavePrefs"</code>.
If you switched off <code>"AutoSavePrefs"</code>, you can enforce saving
of the preferences using the menu entry <code>"File/Save Prefs"</code>.<p>

Remember: NEVER use backslashes (\) in any path or filename you enter to Ayam.

<H2>2. Setting up Shaders</H2>

What are shaders? For the moment, we can safely assume that
shaders are small files that carry material descriptions.
Some example shaders come with your RenderMan compatible renderer
(e.g. BMRT), but you may also create your own.<br>
Unless you load a shader parsing plugin (see below),
Ayam can only work with shaders that have been compiled with <code>"slc"</code>
from BMRT, so you may want to get and install BMRT first.
Unfortunately, NVIDIA/Exluna stopped the official distribution of BMRT,
but it can be found using the obvious search terms with your favourite
search engine.<br>
After the installation of BMRT you need to point Ayam to the directories
where your slc-compiled shaders reside in order to use them with the material
objects in Ayam.
This is done using the preference setting <code>"Main/Shaders"</code>.
Just open the preferences using the main menu entry
<code>"Edit/Preferences"</code> and
enter the appropriate paths (separated by semicolons <code>";"</code>)
into the string entry labeled <code>"Shaders"</code>.<br>
An example string could look like this:<br>
<samp>
D:/BMRT2.6/shaders/;D:/Ayam/scn/shaders/
</samp>
<br>
Now press the <code>"Scan Shaders"</code> button below and watch the
console for error messages.
<p>
Remember: NEVER use backslashes (\) in any path or filename you enter to Ayam.
<p>
If you do not want to use BMRT, you need to load a shader parsing plugin.
In the directory <code>ayam/bin/plugins</code> there are the following
shader parsing plugins:
aysdr.dll for Pixie, ayslb.dll for Air, ayslo3d.dll for 3Delight,
ayslo.dll for PRMan, ayso.dll for RenderDotC, and ayslx.dll for Aqsis.
<p>
The plugins may be loaded manually (using the main menu entry:
"File/Load Custom") or automatically on startup.
In order to load a plugin automatically on startup of Ayam, just add the
complete path and filename of the corresponding Tcl script
(e.g. loadaysdr.tcl) to the "Scripts" preference setting and restart
Ayam. The plugins have to be present in a directory called "plugins",
which in turn has to be present in the directory where "ayam.exe" is located,
in order to make this work. Your directory structure should look like this:
<p>
<code>
ayam/bin/<br>
ayam/bin/ayam.exe<br>
ayam/bin/plugins/ayslb.dll<br>
ayam/bin/plugins/loadayslb.tcl<br>
ayam/bin/plugins/...
</code>
<p>
Note that the plugins are not able to check the Ayam version they
get loaded into. Please, do not try to load them into any other version
of Ayam as 1.8; otherwise you may experience an immediate crash of Ayam.
<p>
Also note that some plugins require additional DLL files to be present in the
DLL search path. Depending on the flavour of your Win32 you may need to
adapt the PATH environment variable to include the directories with those
DLL files. You can also just copy them to the directory where "ayam.exe"
is located. If a plugin does not find the corresponding DLL files it needs,
you will get "invalid argument" Tcl error messages upon loading, or the
plugin will fail to scan shaders later on.
<p>
Furthermore, all plugins have been compiled and tested against a
specific version of the corresponding renderer (as outlined below);
parsing shaders of other versions of those renderers possibly will not work.
<p>
aysdr.dll: Pixie 1.3.3, depends on "ri.dll"<br>
This plugin only works, if the preference setting "Shaders"
contains just a single element (this means, you need to copy
all your private shaders to e.g. c:/pixie/shaders and compile them
there).
<p>
ayslb.dll: Air 2.6, does not depend on other DLL files
<p>
ayslo3d.dll: 3Delight 2.1.0, depends on "3delight.dll"
<p>
ayso.dll: RenderDotC 3.3.5, depends on "soargs.dll"<br>
Since RenderDotC compiles all shaders as shared native code (into DLL files),
all paths of the "Shaders" preference setting should also be present in the
DLL search path.
<p>
ayslx.dll: Aqsis 0.9.0, does not depend on other DLL files
<p>
ayslo.dll: Photorealistic RenderMan 11.5, does not depend on other DLL files
<p>
Remember: NEVER use backslashes (\) in any path or filename you enter to Ayam.

<H2>3. Creating and Saving a Working Environment (View Windows)</H2>

The working environment is simply an almost empty Ayam scene file,
that contains the specification of some view windows.
This file is loaded automatically on every start of Ayam and
presents you with a standard working environment, consisting
of e.g. a traditional 3-view layout (Front, Side, Perspective).
To create your own working environment, follow the steps below:
<UL>
 <LI> Start Ayam.
 <LI> Open and arrange as many views as you like using the
menu entry <code>"Create/View"</code>.<br>
If Ayam crashes or blocks during opening of a view
then probably something with your OpenGL setup is seriously broken.
Fix this, then return here.
 <LI> Save the environment using the menu entry
<code>"Special/Save Environment"</code>. This will save the environment
to the file given in the preference setting <code>"Main/EnvFile"</code>.
The default setting is <code>"~/2view.ay"</code>.
The tilde <code>"~"</code> always expands to the home directory of the
current user. If you have a single or no user on your system you might want
to put an absolute path into the preference setting
<code>"Main/EnvFile"</code> first (e.g. set it to
<code>"D:/ayam/2view.ay"</code>).
Notice that the drive and the path you use already have to exist,
and that you should have write permissions.
<br>
Do not switch off the preference setting <code>"Main/LoadEnv"</code>,
as this would inhibit automatic loading of the working
environment on startup.
<LI> You can immediately try to load the new environment using
the main menu entry <code>"File/New"</code> (provided that the
preference setting <code>"Main/NewLoadsEnv"</code> is not switched off).
</UL>

Remember: NEVER use backslashes (\) in any path or filename you enter to Ayam.
<p>
We are set.
Quit Ayam and start it again, check the console for errors; then
download <code>"Tutorial #1"</code> from
<A HREF="http://www.ayam3d.org/docs.html">http://www.ayam3d.org/</A>
and read it.
<p>
For further information, see also the
<A HREF="doc/html/ayam.html">documentation of Ayam</A>
and the
<A HREF="http://www.ayam3d.org/faq.html">list of frequently
asked questions (FAQ)</A>.

<HR>
<i>Randolf Schultz, 29. Oct 2004<BR>
<A HREF="http://www.ayam3d.org/">
http://www.ayam3d.org/</A>&nbsp;&nbsp;&nbsp;&nbsp;Reconstruct the World!
</i>
</BODY>
</HTML>
