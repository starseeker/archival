<!DOCTYPE HTML SYSTEM "html.dtd">
<HTML>
<HEAD>
<TITLE>Ayam Win32 Setup</TITLE>
</HEAD>
<BODY>

<H1>Ayam Win32 Setup</H1>

This document describes how to set up Ayam on the Win32 platform.
<p>
In addition, there are <A HREF="http://www.ayam3d.org/faq.html">frequently
asked questions</A> that may be of some help, if something does not work as
advertised.

<H2>0. Installation, Starting the Application</H2>

The executable of Ayam (<code>"ayam.exe"</code>) is located in the directory
named <code>"bin"</code>.<br>
You do not need to install Ayam in the system, you can start it
directly with a double click from where you unpacked the archive.
If you get error messages about input or output file handles
when trying to render directly from Ayam, please use the
accompanying batch file <code>"ayam.bat"</code> to start Ayam
instead of directly using <code>"ayam.exe"</code>.
<p>
To start Ayam more easily, you can add an icon to your desktop by double
clicking on the <code>"make_shortcut.vbs"</code> script.<br>
Since Ayam 1.8 there are also two more scripts named
<code>"make_ftassoc.vbs"</code> and <code>"remove_ftassoc.vbs"</code>
that add and remove a file type association with Ayam scene files
(extension .ay) to/from your desktop. After running the
<code>"make_ftassoc.vbs"</code> script, you should be able to
start Ayam by double clicking on Ayam scene files.
On newer versions of Windows, where users do not have write access to the
HKCR tree of the registry, use <code>"make_ftassoc_w7.vbs"</code> and
<code>"remove_ftassoc_w7.vbs"</code> respectively.

<H2>1. Saving Preferences</H2>

All preference settings (Menu: <code>"Edit/Preferences"</code>) are
automatically saved when you leave Ayam.
<p>
The preferences are saved to the file:<br>
<code>"$(HOME)/ayamrc"</code> if the environment variable
<code>"HOME"</code> exists<br>
<code>"$(TEMP)/ayamrc"</code> else.
<p>
The following steps need to be done if you (for some reason)
do not like it that way, or the preferences end up in silly
places (e.g. Win95 is setting your $(HOME) to <code>"C:/"</code>, so that
the preferences are saved to <code>"C:/ayamrc"</code>...).<br>
However, if everything is fine with you, just skip to Step 2 now.
<p>
You can change the path and filename of the preference settings
using the environment variable <code>"AYAMRC"</code>.<br>
How do you set an environment variable?
<p>
An easy way to do this is to edit the batch file <code>"ayam.bat"</code>,
and use it to start Ayam (this route does not work on Windows-NT4!):
<UL>
 <LI> quit Ayam
 <LI> edit the file <code>"ayam.bat"</code>
 <LI> remove the leading <code>"rem"</code> from the line
<code>"rem SET AYAMRC=D:/Ayam/ayamrc"</code>
 <LI> you should change the path <code>"D:/Ayam/ayamrc"</code> to a more
appropriate setting; notice that the drive and the path you use already
have to exist, and that you should have write permissions to the path
that you choose
 <LI> save the file <code>"ayam.bat"</code>
 <LI> use the batch file <code>"ayam.bat"</code> to start Ayam
 <LI> remember to always use the file <code>"ayam.bat"</code> to start
Ayam in the future
</UL>

Alternatively:
<UL>
 <LI> quit Ayam

 <LI> <b>WinXP</b>: open
<code>"Start/Control Panel/System/Advanced/Environment Variables"</code><br>
Add a new variable named <code>"AYAMRC"</code> and set it e.g. to
<code>"D:/ayam/ayamrc"</code>;
notice that the drive and the path you use already have to exist,
and that you should have write permissions to the path that you choose

 <LI> <b>WinNT/2000</b>: open
<code>"Start/Settings/Control Panel/System/Environment"</code><br>
Add a new variable named <code>"AYAMRC"</code>
(On Win2000 you need to be administrator to be able to do this.)
and set it e.g. to <code>"D:/ayam/ayamrc"</code>;
notice that the drive and the path you use already have to exist,
and that you should have write permissions to the path that you choose

 <LI> <b>Win95/98/98SE</b>: From the start menu, choose <code>"Run"</code>
and enter <code>"sysedit"</code>, then click <code>"Ok"</code>.
Select the window that is displaying <code>"AUTOEXEC.BAT"</code>.
Add the line<br>
SET AYAMRC=D:/ayam/ayamrc<br>
to it. Notice that the drive and the path you use already have to exist,
and that you should have write permissions to the path that you choose.

 <LI> <b>WinME</b>: Open
<code>"Start/Programs/Accessories/System Tools/System Information"</code>.
This brings up a window titled <code>"Microsoft Help and Support"</code>.
From here, choose the <code>"Tools"</code> menu, then select the
<code>"System-Configuration"</code> utility. Click the
<code>"Environment"</code> tab.
Add a new variable named <code>"AYAMRC"</code> and set it e.g. to
<code>"D:/ayam/ayamrc"</code>;
notice that the drive and the path you use already have to exist,
and that you should have write permissions to the path that you choose.
 <LI> restart Windows
 <LI> start Ayam again
</UL>

Remember: NEVER use backslashes (\) in any path or filename you enter to Ayam.

<H2>2. Setting up the Renderer</H2>

Download and install a preferred RenderMan compatible renderer.

Open the Ayam main menu "Special/Select Renderer" then choose
the renderer you want to work with. Do not use the "ScanShaders"
option as the shaders are not set up properly yet.

<H2>3. Setting up the Shaders</H2>

What are shaders? For the moment, we can safely assume that
shaders are small files that carry material descriptions.
Some example shaders already come with your RenderMan compatible renderer
but you may also create your own.<br>
After the installation of the preferred RenderMan compliant
renderer you need to point Ayam to the directories where the compiled
shaders of this renderer are stored in order to use them with the material
objects in Ayam.<br>
This is done using the preference setting <code>"Main/Shaders"</code>.
Just open the preferences using the main menu entry
<code>"Edit/Preferences"</code> and
enter the appropriate paths (separated by semicolons <code>";"</code>)
into the string entry labeled <code>"Shaders"</code>.<br>
An example string could look like this:<br>
<samp>
C:/Program Files/Aqsis/shaders/;D:/Ayam/scn/shaders/
</samp>
<br>
Now press the <code>"Scan Shaders"</code> button below and watch the
console for error messages.
<p>
If Ayam fails to scan the shaders, probably a shader parsing plugin
must be loaded first.
<p>
In the directory <code>"ayam/bin/plugins"</code> there are the following
shader parsing plugins:
ayslc.dll for BMRT2.6, aysdr.dll for Pixie, ayslb.dll for Air,
ayslo3d.dll for 3Delight, ayslo.dll for PRMan, and ayso.dll for RenderDotC.
<p>
The plugins may be loaded manually (using the main menu entry:
"File/Load Custom") or automatically (using a script).
In order to load a plugin automatically on each start of Ayam, just add the
name of the corresponding Tcl script (e.g. loadaysdr.tcl) to the "Scripts"
preference setting and restart Ayam.
An example setting setting could look like this:<br>
<samp>
loadayslc.tcl
</samp><br>
Note that some plugins require additional DLL files to be present in the
DLL search path. Depending on the flavour of your Win32 you may need to
adapt the PATH environment variable to include the directories with those
DLL files. You can also just copy them to the directory where the plugin
is located. If a plugin does not find the corresponding DLL files it needs,
you will get "invalid argument" Tcl error messages upon loading, or the
plugin will fail to scan shaders later on.
<p>
Furthermore, all plugins have been compiled and tested against a
specific version of the corresponding renderer (as outlined below);
parsing shaders of other versions of those renderers possibly will not work.
<p>
Plugin-DLL: Renderer Compiled Version / Tested Version, DLL dependency
<p>
ayslx.dll: Aqsis 1.0.1 / 1.4.2, does not depend on other DLL files
<p>
aysdr.dll: Pixie 2.0.1 / 2.6, depends on "sdr.dll"<br>
<p>
ayslb.dll: Air 2.6, does not depend on other DLL files
<p>
ayslc.dll: BMRT 2.6 / 2.6, does not depend on other DLL files
<p>
ayslo3d.dll: 3Delight 8.5 / 8.5, depends on "3delight.dll"
<p>
ayso.dll: RenderDotC 3.4 / 3.4, depends on "soargs.dll"<br>
Since RenderDotC compiles all shaders as shared native code (into DLL files),
all paths of the "Shaders" preference setting should also be present in the
DLL search path.
<p>
ayslo.dll: Photorealistic RenderMan 11.5, does not depend on other DLL files
<p>
aygso.dll: Gelato 2.2 / 2.2, depends on "libgelato.dll"<br>
<p>
This version information may be outdated; current information can be obtained
from the <A HREF="http://www.ayam3d.org/download.html">download page</A>
of the Ayam project, or the respective "File Release Notes" document on the
<A HREF="https://sourceforge.net/projects/ayam/files/">SourceForge download page</A> of the Ayam project.
<p>
Finally, mind that you can only load <em>one</em> shader parsing
plugin at a time into Ayam.
<p>
Remember: NEVER use backslashes (\) in any path or filename you enter to Ayam.

<H2>4. Creating and Saving a Working Environment (View Windows)</H2>

The working environment is simply an almost empty Ayam scene file,
that contains the specification of some view windows (and the
pane configuration).
This file is loaded automatically on every start of Ayam and
presents you with a standard working environment, consisting
of e.g. a traditional 3-view layout (Front, Side, Perspective).
To create your own working environment, follow the steps below:
<UL>
 <LI> Start Ayam.
 <LI> Open and arrange as many views as you like using the
menu entry <code>"Create/View"</code>.<br>
If Ayam crashes or blocks during opening of a view
then probably something with your OpenGL setup is seriously broken.
Fix this, then return here.
 <LI> Save the environment using the menu entry
<code>"Special/Save Environment"</code>. This will save the environment
to the file given in the preference setting <code>"Main/EnvFile"</code>.
The default setting is <code>"~/2view.ay"</code>.
The tilde <code>"~"</code> always expands to the home directory of the
current user. If you have a single or no user on your system you might
want to put an absolute path into the preference setting
<code>"Main/EnvFile"</code> first (e.g. set it to
<code>"D:/ayam/2view.ay"</code>).
Notice that the drive and the path you use already have to exist,
and that you should have write permissions.
<br>
<LI> You can immediately try to load the new environment using
the main menu entry <code>"File/New"</code>.
</UL>
Remember: NEVER use backslashes (\) in any path or filename you enter to Ayam.
<p>
We are set.
Quit Ayam and start it again, check the console for errors; then
download <code>"Tutorial #1"</code> from
<A HREF="http://www.ayam3d.org/docs.html">http://www.ayam3d.org/</A>
and read it.
<p>
For further information, see also the
<A HREF="doc/html/ayam.html">documentation of Ayam</A>
and the
<A HREF="http://www.ayam3d.org/faq.html">list of frequently
asked questions (FAQ)</A>.

<HR>
<i>Randolf Schultz, 14. May 2011<BR>
<A HREF="http://www.ayam3d.org/">
http://www.ayam3d.org/</A>&nbsp;&nbsp;&nbsp;&nbsp;Reconstruct the World!
</i>
</BODY>
</HTML>
